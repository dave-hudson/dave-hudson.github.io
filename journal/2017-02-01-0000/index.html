<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    
    
    
        <title>c8: More improvements - Dave Hudson</title>
    

    <meta name="description" content="c8: Supporting conversions to C&#43;&#43; native types.">

    

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    

    <meta property="og:title" content="c8: More improvements" />
<meta property="og:description" content="c8: Supporting conversions to C&#43;&#43; native types." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hashingit.com/journal/2017-02-01-0000/" />
<meta property="og:image" content="https://hashingit.com/about/dave.jpg"/>
<meta property="article:published_time" content="2017-02-01T00:00:00+00:00" />
<meta property="article:modified_time" content="2017-02-01T00:00:00+00:00" />

    <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://hashingit.com/about/dave.jpg"/>

<meta name="twitter:title" content="c8: More improvements"/>
<meta name="twitter:description" content="c8: Supporting conversions to C&#43;&#43; native types."/>


    <link href="https://fonts.googleapis.com/css?family=Open Sans:300,400,600,300italic,400italic,600italic,700bold|Lalezar:400" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" media="screen" href="https://hashingit.com/css/normalize.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://hashingit.com/css/main.css" />
    <link disabled id="dark-mode-theme" rel="stylesheet" type="text/css" href="https://hashingit.com/css/dark.css" />

    
        <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    
    
</head>

    <body>
        <div class="container">
            <div class="header">
    <table class="site-title">
        <tr>
            <td>
                <h1>Dave Hudson</h1>
                
                    <h2><a href="https://hashingit.com/">hashingit.com</a></h2>
                
            </td>
            <td>
                <nav class="social">
                    
                        <div class="icon"><a href="/index.xml" title="RSS"><i data-feather="rss"></i></a></div>
                    
                        <div class="icon"><a href="https://twitter.com/hashingitcom" title="Twitter"><i data-feather="twitter"></i></a></div>
                    
                        <div class="icon"><a href="https://facebook.com/hashingitcom" title="Facebook"><i data-feather="facebook"></i></a></div>
                    
                        <div class="icon"><a href="https://linkedin.com/in/davejh" title="LinkedIn"><i data-feather="linkedin"></i></a></div>
                    
                        <div class="icon"><a href="https://github.com/dave-hudson" title="Github"><i data-feather="github"></i></a></div>
                    
                </nav>
            </td>
        </tr>
    </table>
    <nav class="site-menu">
        
            <div class="menu">
                <a href="/elements">Elements</a>
            </div>
        
            <div class="menu">
                <a href="/blog">Blog</a>
            </div>
        
            <div class="menu">
                <a href="/journal">Journal</a>
            </div>
        
            <div class="menu">
                <a href="/tags">Tags</a>
            </div>
        
            <div class="menu">
                <a href="/about">Me</a>
            </div>
        
        <div class="icon" id="dark-mode-moon"><a><i data-feather="moon"></i></a></div>
        <div class="icon" id="dark-mode-sun"><a><i data-feather="sun"></i></a></div>
    </nav>
</div>


            <div class="title">
                <h1>c8: More improvements</h1>
                <div class="meta">
                    2017-02-01 00:00 - 1 min read
                </div>
            </div>

            <div class="journal-entry">
                <nav class="tags">
                    
                        
                    
                </nav>

                <div class="markdown">
                    <h2 id="making-things-consistent">Making Things Consistent</h2>
<p>Some of the operators weren&rsquo;t implemented in a way that was really consistent with C++ norms.  For example the
+= operator had a <code>void</code> return type.  This was something of an oversight so I corrected this!</p>
<h2 id="more-performance-tweaking">More Performance Tweaking</h2>
<p>We&rsquo;ve seen quite a lot of incremental improvements over the last couple of weeks, but it still seems like there&rsquo;s
a lot of unnecessary copying happening.  One easy way to check for this is to instrument calls to the copy
constructors in the various object classes and see if the copy operations are actually necessary or not.</p>
<p>In the case of the <code>c8::natural</code> class it turned out that there were several places in which copy operations
could be replaced with move operations instead.  This is an area that I find a little frustrating with C++,
because naive code can end up slow without realizing it, and is compounded by the compiler often inlining the
offending code so it&rsquo;s harder to spot.</p>
<p>One thing that is also becoming clear, however, is that the performance measurements in the unit tests aren&rsquo;t
actually good enough for our purposes.  The results are far too variable and that makes it very hard to reason
about the impact of changes.  This will need to be addressed shortly!</p>

                </div>
            </div>

            
                <div class="prev-next">
                    <h2>More journal entries</h2>
                    <table class="meta-nav">
                        <tr>
                            <td class="prev">
                                
                                    <a href="https://hashingit.com/journal/2017-01-31-0000/" class="page-link" aria-label="Previous"><span aria-hidden="true"><i data-feather="chevron-left"></i>&nbsp;</span></a>
                                
                            </td>
                            <td class="prev-text">
                                
                                    <a href="https://hashingit.com/journal/2017-01-31-0000/" class="page-link" aria-label="Previous"><span aria-hidden="true">c8: More speedups </span></a>
                                
                            </td>
                            <td class="next-text">
                                
                                    <a href="https://hashingit.com/journal/2017-02-03-0000/" class="page-link" aria-label="Next"><span aria-hidden="true">c8: Overhauling unit tests</span></a>
                                
                            </td>
                            <td class="next">
                                
                                    <a href="https://hashingit.com/journal/2017-02-03-0000/" class="page-link" aria-label="Next"><span aria-hidden="true">&nbsp;<i data-feather="chevron-right"></i></span></a>
                                
                            </td>
                        </tr>
                    </table>
                </div>
            

            <div class="footer">
    <div class="copyright">Â© 2014-2020 David J. Hudson</div>
</div>

<script src="https://hashingit.com/js/footer.js"></script>


    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-49245383-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



    <script>feather.replace()</script>


        </div>
    </body>
</html>
